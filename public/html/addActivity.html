<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hasdeu</title>
	<link rel="shortcut icon" href="../img/favicon.png" type="image/x-icon">
	<link rel="stylesheet" href="../css/main.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<!-- <script src="../scripts/script.js"></script> -->
</head>
<body>

	<header>
		<img src="../img/logo.jpg" alt="" class="logo">
	</header>

	<div class="div-form">
		<form action="/api/activitati/activitate_noua" method="POST">
		<ul class="form-activity">
    		<li class="audienta-list">
    			<label class="tip">Tip<select name="tip">
    				<option>STIINTIFICE</option>
    				<option>CULTURALE</option>
    			</select>
    			</label>
    		</li>		
			<li class="audienta-list">
    			<label class="format">Format<select name="format">
    				<option>CONFERINTA</option>
					<option>SIMPOZION</option>
					<option>LECTIE_PUBLICA</option>
					<option>MASA_ROTUNDA</option>
					<option>COLOCVIU</option>
    			</select>
    			</label>
    		</li>	
    		<li>
    			<input type="date" name="dataDesfasurare" placeholder="Data de desfasurare">
    		</li>
    		<li>
    			<input type="text" name="locatie" placeholder="Localul">
    		</li>
    		<li>
    			<input type="number" name="nrTotalLocuri" placeholder="Numarul total de locuri">
    		</li>    		
    		<li>
    			<input type="number" name="nrLocuriDisponibile" placeholder="Numarul de locuri disponibile">
    		</li>
    		<li>
    			<input type="text" name="descriere" placeholder="descriere">
    		</li>
    		<li class="audienta-list">
    			<label class="audienta">Audienta<select name="audienta">
    				<option>COPII</option>
    				<option>TINERI</option>
					<option>ADOLESCENTI</option>
					<option>ADULTI</option>
					<option>SENIORI</option>
    			</select>
    			</label>
    		</li>		
    		<li class="audienta-list">
    			<label class="topic">Topic<select name="topic">
    				<option>TEATRU</option>
					<option>MUZICA</option>
					<option>DANS</option>
    			</select>
    			</label>
    		</li>	
    		<li class="audienta-list">
    			<label class="limba">Limba<select name="limba">
    				<option>ROMANA</option>
					<option>RUSA</option>
					<option>ENGLEZA</option>
    			</select>
    			</label>
    		</li>	
    		<button class="newActivity">Adauga activitate +</button>			
		</ul>
	</form>
	
	<script>
		$('#newActivity').click(function () {
			console.log('CLICK')
			// let title = $(this).text();
		
			// $(".title").html(title);
		
			// $(".hidden").css("display","block");
			var formData = {}
			$(this.form).find("input[name]").each(function (index, node) {
				formData[node.name] = node.value;
			});
			$(this.form).find("select[name]").each(function (index, node) {
				formData[node.name] = node.options[node.selectedIndex].text;
			});

			console.log(formData)
			let jsonData = {}
			try {
				jsonData = JSON.parse(formData); 
			} catch (e) {
				alert(e);
				jsonData = {};
			}
			$.ajax({
				url: "/api/activitati/activitate_noua",
				type: "POST",
				data: jsonData,
				contentType: 'application/json; charset=UTF-8',
				dataType:    'json',
				success:     function (response) {
					window.location.href = data.redirect;
				},
				error: function (err) {
					console.log('ERR', err);
				}
			});
		});
	</script> 
</div>
</body>
</html>	
